<!DOCTYPE html><html lang="en"><head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-122495998-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-122495998-2');
</script>
<title>bBot</title><meta name="description" content="An adaptable chatbot framework with a conversational core."/><meta name="author" content="Tim Kinnane &lt;tim.kinnane@amazebot.chat&gt;"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"/><link rel="stylesheet" href="//bbot.chat/main.css"/><link rel="icon" type="image/png" href="//bbot.chat/img/favicon-32x32.png" sizes="32x32"/><link rel="icon" type="image/png" href="//bbot.chat/img/favicon-16x16.png" sizes="16x16"/><meta name="application-name" content="Tim Kinnane &lt;tim.kinnane@amazebot.chat&gt;"/><meta name="msapplication-TileColor" content="#FFFFFF"/><meta name="msapplication-TileImage" content="//bbot.chat/img/mstile-144x144.png"/><link rel="apple-touch-icon-precomposed" sizes="57x57" href="//bbot.chat/img/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon-precomposed" sizes="114x114" href="//bbot.chat/img/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon-precomposed" sizes="72x72" href="//bbot.chat/img/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon-precomposed" sizes="144x144" href="//bbot.chat/img/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon-precomposed" sizes="120x120" href="//bbot.chat/img/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon-precomposed" sizes="152x152" href="//bbot.chat/img/apple-touch-icon-152x152.png"/><link rel="icon" type="image/png" href="//bbot.chat/img/favicon-32x32.png" sizes="32x32"/><link rel="icon" type="image/png" href="//bbot.chat/img/favicon-16x16.png" sizes="16x16"/></head><body class="route-docs route-hubot"><nav role="navigation" class="navbar navbar-expand-lg sticky-top navbar-light"><a href="/" class="navbar-brand"><svg viewbox="0 0 212 73" xmlns="http://www.w3.org/2000/svg">
    <path d="M76.011 37.25l-.192-.02c0-1.607-.033-3.214.009-4.819.052-2.009-.678-3.66-1.984-5.045-.909-.963-1.981-1.532-3.34-1.243-2.592.554-4.282 2.65-4.415 5.504-.079 1.684-.07 3.38-.271 5.049-.417 3.459-.842 6.91-.516 10.406.174 1.87.385 3.733 1.25 5.425.52 1.014 1.278 1.59 2.426 1.538a32.267 32.267 0 0 1 3.09-.02c.754.038 1.292-.293 1.553-.956.482-1.22 1.083-2.456 1.238-3.74.483-4.012.782-8.05 1.152-12.078m7.984-.593c-.127 5.037-.282 10.071-1.354 15.01-.579 2.664-1.4 5.223-3.103 7.373-1.331 1.681-3.047 2.625-5.078 2.737-2.827.156-5.672.318-8.493.153-3.225-.189-5.35-2.29-6.756-5.243-1.684-3.534-2.229-7.361-2.21-11.241.014-3.12.404-6.235.607-9.355.101-1.547.15-3.097.232-4.646.41-7.758 7.232-14.08 14.576-13.395 3.257.304 5.87 2.074 8.005 4.624 2.399 2.864 3.634 6.21 3.577 10.062-.019 1.307-.003 2.614-.003 3.921m62.017.596l-.193-.022c0-1.606-.033-3.213.009-4.817.053-2.009-.678-3.66-1.984-5.044-.91-.963-1.982-1.532-3.34-1.242-2.592.553-4.283 2.65-4.416 5.503-.078 1.684-.07 3.38-.27 5.048-.417 3.459-.842 6.91-.517 10.404.174 1.87.386 3.733 1.252 5.424.519 1.014 1.277 1.591 2.425 1.538a32.065 32.065 0 0 1 3.091-.019c.754.038 1.292-.294 1.553-.958.48-1.22 1.082-2.455 1.237-3.738.484-4.012.782-8.05 1.153-12.077m7.984-.647c-.13 5.036-.277 10.07-1.344 15.008-.582 2.693-1.406 5.279-3.13 7.447-1.334 1.68-3.057 2.61-5.087 2.72-2.828.152-5.673.316-8.494.146-3.19-.192-5.302-2.27-6.707-5.19-1.698-3.53-2.246-7.356-2.234-11.234.01-3.119.399-6.235.6-9.354.102-1.574.157-3.151.24-4.726.406-7.736 7.297-14.094 14.602-13.367 3.225.32 5.82 2.062 7.945 4.583 2.407 2.856 3.658 6.194 3.612 10.047-.016 1.307-.003 2.613-.003 3.92m-114.932-.68c.166-8.212 1.333-15.957 4.043-23.391a37.867 37.867 0 0 1 5.032-9.458c.37-.503.833-.954 1.32-1.335 1.102-.86 2.3-1.02 3.5-.236.713.465 1.424.962 2.04 1.554 1.238 1.19 1.288 2.137.37 3.62-1.086 1.755-2.23 3.477-3.2 5.302-2.604 4.907-3.95 10.243-4.434 15.802-.316 3.64-.428 7.3-.533 10.955-.03 1.081.136 2.221.456 3.25.958 3.084 1.522 6.245 1.854 9.452.315 3.034 1.247 5.843 2.44 8.597 1.077 2.49 2.06 5.025 3.062 7.55.746 1.878.138 2.952-1.165 3.885-.867.62-1.894 1.02-2.887 1.408-.693.27-1.37.081-1.819-.619-.67-1.044-1.447-2.036-1.968-3.16-1.429-3.085-2.88-6.173-4.06-9.367-.695-1.877-.894-3.957-1.31-5.947-.583-2.777-1.076-5.579-1.762-8.327-.806-3.23-1.209-6.481-.979-9.535M173 37.612c-.335 5.047-.696 10.054-1.93 14.94-.573 2.262-1.33 4.448-2.45 6.463-.852 1.533-1.436 3.163-1.928 4.867-.803 2.782-2.32 5.093-4.378 6.985-.038.034-.077.07-.116.101-1.876 1.527-3.049 1.378-4.536-.574-1.578-2.07-1.813-3.26-.415-5.465 1.96-3.095 3.138-6.564 4.61-9.902 1.756-3.981 2.676-8.145 2.85-12.509.123-3.062.374-6.166.054-9.189-.388-3.663-1.176-7.3-2.05-10.874-.83-3.39-1.914-6.718-3.055-10.005-.434-1.25-1.347-2.303-2.028-3.455-.508-.858-1.082-1.69-1.458-2.613-.208-.511-.222-1.24-.06-1.778.486-1.622 1.44-2.943 2.683-3.987 1.004-.843 1.55-.86 2.38.18 1.497 1.87 2.917 3.814 4.3 5.782 2.045 2.907 3.022 6.355 3.88 9.794a236.62 236.62 0 0 1 3.068 14.107c.432 2.326.4 4.752.579 7.132m-61.67 30.703c-4.722 0-9.446-.068-14.167.033-1.965.042-3.921.589-5.888.641-2.116.057-4.245-.121-6.355-.346-1.175-.124-1.714-1.147-1.86-2.323-.198-1.575.1-3.07.86-4.443.385-.697.949-1.055 1.723-1.001 3.937.272 7.835-.313 11.75-.57 3.712-.244 7.44-.32 11.159-.304 2.997.013 5.994.27 8.99.429 2.588.137 5.175.29 7.763.433.282.016.565.004.847.024 1.465.102 1.943.62 1.833 2.177-.103 1.454-.328 2.897-.476 4.347-.084.83-.536 1.257-1.258 1.258-1.794.004-3.59-.026-5.383-.1-3.18-.13-6.357-.305-9.536-.461l-.001.206M23.34 38.997c-2.616.038-5.34-1.34-7.861-3.282-1.138-.876-2.293-1.742-3.516-2.487-.561-.342-1.3-.505-1.967-.537-1.309-.062-2.23.633-2.716 1.876-.14.358-.23.735-.345 1.103-.212.683-.642 1.11-1.385 1.122a9.328 9.328 0 0 1-4.922-1.293c-.456-.265-.652-.664-.626-1.225.093-1.97.323-3.9 1.366-5.634 1.274-2.117 3.312-3.01 5.614-3.385 2.494-.408 5.015-.431 7.323.722 1.592.795 3.034 1.896 4.53 2.88.984.648 1.916 1.38 2.928 1.98.49.29 1.099.408 1.67.521.641.128.914-.353 1.11-.852.385-.978.733-1.97 1.13-2.943.511-1.246 1.48-1.781 2.805-1.731 1.507.057 2.91.416 3.987 1.544.277.291.555.76.534 1.13-.22 3.973-1.742 7.264-5.195 9.456-1.148.729-2.435 1.076-4.465 1.035m165.128-13.991c3.387-.108 6.162 1.326 8.739 3.338 1.13.882 2.322 1.688 3.518 2.48.349.231.8.335 1.218.427 1.045.229 1.291.078 1.674-.914.379-.98.733-1.97 1.15-2.934.438-1.017 1.25-1.531 2.36-1.554 1.623-.034 3.127.314 4.31 1.502.283.286.58.749.563 1.117-.173 3.797-1.603 6.982-4.766 9.23-1.67 1.185-3.555 1.455-5.579 1.23-2.763-.31-5.043-1.604-7.2-3.233-1.146-.865-2.294-1.74-3.518-2.483-.56-.34-1.306-.502-1.972-.514-1.306-.023-2.37.613-2.67 1.909-.506 2.191-.999 2.502-3.611 2.012-1.014-.19-1.985-.658-2.948-1.064-.534-.225-.765-.682-.732-1.313.101-1.942.324-3.846 1.345-5.56 1.297-2.178 3.387-3.047 5.744-3.439.784-.13 1.583-.16 2.375-.237" fill="#4A4A4A"/>
</svg>
</a><button type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button><div id="navbarNav" class="collapse navbar-collapse"><ul class="navbar-nav ml-auto"></a></li><li class="nav-item"><a class="nav-link" id="" href="/">Home<li class="nav-item"><a class="nav-link" id="docs" href="/docs">Docs<b class="caret"></b></a>
<div class="dropdown-menu" aria-labelledby="docs"><a href="/docs/core" class="dropdown-item">Running bBot</a><a href="/docs/path" class="dropdown-item">Branching Conversations</a><a href="/docs/thought" class="dropdown-item">States &amp; Thought</a><a href="/docs/adapters" class="dropdown-item">Service Adapters</a><a href="/docs/wip#nlu" class="dropdown-item">Natural Language</a><a href="/docs/wip#middleware" class="dropdown-item">Middleware</a><a href="/docs/wip#config" class="dropdown-item">Configuration</a><a href="/docs/wip#deploy" class="dropdown-item">Deployment</a><a href="/docs/wip#messages" class="dropdown-item">Messages &amp; Envelopes</a><a href="/docs/wip#logging" class="dropdown-item">Logging</a><a href="/docs/wip#brain" class="dropdown-item">Memory &amp; Storage</a><a href="/docs/wip#requests" class="dropdown-item">Requesting Data</a><a href="/docs/wip#server" class="dropdown-item">Server &amp; Webhooks</a><a href="/docs/hubot" class="dropdown-item">Hubot Migration</a></div><li class="nav-item"><a class="nav-link" id="faq" href="/faq">FAQ<li class="nav-item"><a class="nav-link" id="features" href="/features">Features<li class="nav-item"><a class="nav-link" id="modules" href="/modules">Modules<li class="nav-item"><a class="nav-link" id="https//github.com/Amazebot/bbot" href="https://github.com/Amazebot/bbot">Source<li class="nav-item"><a class="nav-link" id="https//amazebot.github.io/bbot/" href="https://amazebot.github.io/bbot/">API</a></li></ul></div></nav><header><div class="container"><div class="position-relative overflow-hidden py-5 text-center"><div class="col-md-8 mx-auto"><h1 id="logo" class="mb-4"><a href="/"><svg viewBox="0 0 212 136" xmlns="http://www.w3.org/2000/svg">
    <g fill="none" fill-rule="evenodd">
        <path fill="#FFCE64" d="M106 0l72 116H34z"/>
        <path d="M48.121 135.346c5.073-10.088 13.569-22.811 14.632-24.264 1.063-1.452 3.85-1.433 3.13 0-5.068 10.08-13.583 21.489-14.707 23.025-1.125 1.537-3.771 2.664-3.055 1.239zM67.11 133.345c3.814-7.948 11.203-18.58 12.429-20.265 1.225-1.684 4.054-2.886 3.35-1.421-3.814 7.947-11.157 18.557-12.386 20.246-1.23 1.689-4.097 2.904-3.394 1.44zM56.108 135.107c4.668-8.49 12.662-18.382 13.462-19.362.8-.98 2.891-1.006 2.338 0-4.77 8.674-12.014 18.17-12.985 19.362-.972 1.19-3.47 1.191-2.815 0zM87.09 19.212c2.744-1.22 11.569 3.127 12.573 5.071.67 1.296.341 2.702-.985 4.217-7.347 3.08-12.113 6.055-14.3 8.926-3.278 4.306-.03-16.994 2.713-18.214zM142.5 113c1.933 0 3.5-1.757 3.5-3.925s-.167-4.075-2.713-4.075c-2.547 0-4.287 1.907-4.287 4.075s1.567 3.925 3.5 3.925zM135 127c2.21 0 4-1.976 4-4.413 0-2.437-1.54-5.332-4-4.412-2.46.92-4 1.975-4 4.412s1.79 4.413 4 4.413zM147.16 134c1.934 0 2.84-1.5 2.84-3.456 0-1.958-1.567-3.544-3.5-3.544s-3.5 1.586-3.5 3.544c0 1.957 2.228 3.456 4.16 3.456zM144.357 36.59c1.463.778 3.37.051 4.261-1.624.89-1.675 1.548-3.215-.38-4.24-1.927-1.025-4.027-.251-4.918 1.423-.89 1.675-.426 3.663 1.037 4.441zM162.592 22.649c1.463.778 3.267.245 4.03-1.19.762-1.434.649-3.68-1.268-4.005-1.917-.325-3.267-.246-4.03 1.189-.763 1.435-.195 3.228 1.268 4.006zM158.743 12.929c1.22.648 2.293.006 2.95-1.228.656-1.234.2-2.76-1.02-3.408-1.218-.649-2.739-.173-3.395 1.06-.656 1.235.246 2.928 1.465 3.576zM34.16 7C36.095 7 37 5.5 37 3.544 37 1.586 35.433 0 33.5 0S30 1.586 30 3.544C30 5.5 32.228 7 34.16 7z" fill="#5A5A5A"/>
        <path d="M34.609 23.416c.845 1.206 2.73 1.852 4.863 1.988.576-2.571 1.897-5.013 3.803-6.666 3.974-3.448 8.664-4.77 10.804-2.666 2.236 2.198-1.212 6.825-5.628 9.755-1.787 1.186-4.214 1.92-6.672 2.123-.078 2.153.528 4.187 1.95 5.409 1.035.662 1.333 1.337.893 2.024-.44.688-1.312.654-2.617-.103-2.048-1.759-2.93-4.488-2.854-7.321-2.816-.221-5.376-1.212-6.7-3.1-.977-1.393-1.368-2.955-1.27-4.568-1.61-.473-2.976-1.369-3.856-2.727-2.679-4.13-.831-9.227 3.9-12.89l1.63 2.012c-3.798 2.94-5.155 6.683-3.32 9.512.474.732 1.239 1.25 2.178 1.564.817-2.306 2.51-4.592 4.808-6.528 2.599-2.19 3.956-3.22 5.363-3.936 2.123-1.083 3.99-1.03 5.29.586 2.32 2.882.163 6.523-4.75 10.087-2.536 1.838-5.733 2.796-8.613 2.717-.019.997.236 1.927.798 2.728zm12.366.29c1.567-1.04 3.171-2.538 4.197-3.915.49-.66.816-1.247.942-1.684.07-.243.066-.278.113-.232-.293-.288-1.143-.368-2.36-.025-1.503.424-3.229 1.4-4.85 2.807-1.334 1.157-2.3 2.849-2.815 4.656 1.78-.225 3.51-.77 4.773-1.607zm-6.117-7.795c3.851-2.792 5.272-5.191 4.26-6.447-.367-.457-.883-.472-2.017.106-1.162.592-2.43 1.555-4.867 3.607-1.807 1.523-3.131 3.252-3.839 4.94 2.132-.057 4.53-.804 6.463-2.206z" fill="#5A5A5A" fill-rule="nonzero"/>
        <path d="M76.011 70.25l-.192-.02c0-1.607-.033-3.214.009-4.819.052-2.009-.678-3.66-1.984-5.045-.909-.963-1.981-1.532-3.34-1.243-2.592.554-4.282 2.65-4.415 5.504-.079 1.684-.07 3.38-.271 5.049-.417 3.459-.842 6.91-.516 10.406.174 1.87.385 3.733 1.25 5.425.52 1.014 1.278 1.59 2.426 1.538a32.267 32.267 0 0 1 3.09-.02c.754.038 1.292-.293 1.553-.956.482-1.22 1.083-2.456 1.238-3.74.483-4.012.782-8.05 1.152-12.078m7.984-.593c-.127 5.037-.282 10.071-1.354 15.01-.579 2.664-1.4 5.223-3.103 7.373-1.331 1.681-3.047 2.625-5.078 2.737-2.827.156-5.672.318-8.493.153-3.225-.189-5.35-2.29-6.756-5.243-1.684-3.534-2.229-7.361-2.21-11.241.014-3.12.404-6.235.607-9.355.101-1.547.15-3.097.232-4.646.41-7.758 7.232-14.08 14.576-13.395 3.257.304 5.87 2.074 8.005 4.624 2.399 2.864 3.634 6.21 3.577 10.062-.019 1.307-.003 2.614-.003 3.921M146.012 70.254l-.193-.022c0-1.606-.033-3.213.009-4.817.053-2.009-.678-3.66-1.984-5.044-.91-.963-1.982-1.532-3.34-1.242-2.592.553-4.283 2.65-4.416 5.503-.078 1.684-.07 3.38-.27 5.048-.417 3.459-.842 6.91-.517 10.404.174 1.87.386 3.733 1.252 5.424.519 1.014 1.277 1.591 2.425 1.538a32.065 32.065 0 0 1 3.091-.019c.754.038 1.292-.294 1.553-.958.48-1.22 1.082-2.455 1.237-3.738.484-4.012.782-8.05 1.153-12.077m7.984-.647c-.13 5.036-.277 10.07-1.344 15.008-.582 2.693-1.406 5.279-3.13 7.447-1.334 1.68-3.057 2.61-5.087 2.72-2.828.152-5.673.316-8.494.146-3.19-.192-5.302-2.27-6.707-5.19-1.698-3.53-2.246-7.356-2.234-11.234.01-3.119.399-6.235.6-9.354.102-1.574.157-3.151.24-4.726.406-7.736 7.297-14.094 14.602-13.367 3.225.32 5.82 2.062 7.945 4.583 2.407 2.856 3.658 6.194 3.612 10.047-.016 1.307-.003 2.613-.003 3.92M39.064 68.927c.166-8.212 1.333-15.957 4.043-23.391a37.867 37.867 0 0 1 5.032-9.458c.37-.503.833-.954 1.32-1.335 1.102-.86 2.3-1.02 3.5-.236.713.465 1.424.962 2.04 1.554 1.238 1.19 1.288 2.137.37 3.62-1.086 1.755-2.23 3.477-3.2 5.302-2.604 4.907-3.95 10.243-4.434 15.802-.316 3.64-.428 7.3-.533 10.955-.03 1.081.136 2.221.456 3.25.958 3.084 1.522 6.245 1.854 9.452.315 3.034 1.247 5.843 2.44 8.597 1.077 2.49 2.06 5.025 3.062 7.55.746 1.878.138 2.952-1.165 3.885-.867.62-1.894 1.02-2.887 1.408-.693.27-1.37.081-1.819-.619-.67-1.044-1.447-2.036-1.968-3.16-1.429-3.085-2.88-6.173-4.06-9.367-.695-1.877-.894-3.957-1.31-5.947-.583-2.777-1.076-5.579-1.762-8.327-.806-3.23-1.209-6.481-.979-9.535M173 70.612c-.335 5.047-.696 10.054-1.93 14.94-.573 2.262-1.33 4.448-2.45 6.463-.852 1.533-1.436 3.163-1.928 4.867-.803 2.782-2.32 5.093-4.378 6.985-.038.034-.077.07-.116.101-1.876 1.527-3.049 1.378-4.536-.574-1.578-2.07-1.813-3.26-.415-5.465 1.96-3.095 3.138-6.564 4.61-9.902 1.756-3.981 2.676-8.145 2.85-12.509.123-3.062.374-6.166.054-9.189-.388-3.663-1.176-7.3-2.05-10.874-.83-3.39-1.914-6.718-3.055-10.005-.434-1.25-1.347-2.303-2.028-3.455-.508-.858-1.082-1.69-1.458-2.613-.208-.511-.222-1.24-.06-1.778.486-1.622 1.44-2.943 2.683-3.987 1.004-.843 1.55-.86 2.38.18 1.497 1.87 2.917 3.814 4.3 5.782 2.045 2.907 3.022 6.355 3.88 9.794a236.62 236.62 0 0 1 3.068 14.107c.432 2.326.4 4.752.579 7.132M111.33 101.315c-4.722 0-9.446-.068-14.167.033-1.965.042-3.921.589-5.888.641-2.116.057-4.245-.121-6.355-.346-1.175-.124-1.714-1.147-1.86-2.323-.198-1.575.1-3.07.86-4.443.385-.697.949-1.055 1.723-1.001 3.937.272 7.835-.313 11.75-.57 3.712-.244 7.44-.32 11.159-.304 2.997.013 5.994.27 8.99.429 2.588.137 5.175.29 7.763.433.282.016.565.004.847.024 1.465.102 1.943.62 1.833 2.177-.103 1.454-.328 2.897-.476 4.347-.084.83-.536 1.257-1.258 1.258-1.794.004-3.59-.026-5.383-.1-3.18-.13-6.357-.305-9.536-.461l-.001.206M23.34 71.997c-2.616.038-5.34-1.34-7.861-3.282-1.138-.876-2.293-1.742-3.516-2.487-.561-.342-1.3-.505-1.967-.537-1.309-.062-2.23.633-2.716 1.876-.14.358-.23.735-.345 1.103-.212.683-.642 1.11-1.385 1.122a9.328 9.328 0 0 1-4.922-1.293c-.456-.265-.652-.664-.626-1.225.093-1.97.323-3.9 1.366-5.634 1.274-2.117 3.312-3.01 5.614-3.385 2.494-.408 5.015-.431 7.323.722 1.592.795 3.034 1.896 4.53 2.88.984.648 1.916 1.38 2.928 1.98.49.29 1.099.408 1.67.521.641.128.914-.353 1.11-.852.385-.978.733-1.97 1.13-2.943.511-1.246 1.48-1.781 2.805-1.731 1.507.057 2.91.416 3.987 1.544.277.291.555.76.534 1.13-.22 3.973-1.742 7.264-5.195 9.456-1.148.729-2.435 1.076-4.465 1.035M188.467 58.006c3.387-.108 6.162 1.326 8.739 3.338 1.13.882 2.322 1.688 3.518 2.48.349.231.8.335 1.218.427 1.045.229 1.291.078 1.674-.914.379-.98.733-1.97 1.15-2.934.438-1.017 1.25-1.531 2.36-1.554 1.623-.034 3.127.314 4.31 1.502.283.286.58.749.563 1.117-.173 3.797-1.603 6.982-4.766 9.23-1.67 1.185-3.555 1.455-5.579 1.23-2.763-.31-5.043-1.604-7.2-3.233-1.146-.865-2.294-1.74-3.518-2.483-.56-.34-1.306-.502-1.972-.514-1.306-.023-2.37.613-2.67 1.909-.506 2.191-.999 2.502-3.611 2.012-1.014-.19-1.985-.658-2.948-1.064-.534-.225-.765-.682-.732-1.313.101-1.942.324-3.846 1.345-5.56 1.297-2.178 3.387-3.047 5.744-3.439.784-.13 1.583-.16 2.375-.237" fill="#4A4A4A"/>
    </g>
</svg>
</a></h1><h2>Hubot Migration ðŸ¤–</h2></div></div></div></header><main role="main"><article><div class="page container"><div class="col-lg-10 col-xl-9 mx-auto"><div class="page-content"><h2>The Real MVP</h2><p>This project was spawned from a collection of extensions to GitHub&#39;s Hubot
framework that outgrew their repo and begged for refactoring as a coherent
product. We are immensely thankful for the work of our predecessors.</p>
<p>bBot&#39;s first release reproduced most of Hubot&#39;s functionality, with its platform
adaptor model extended to storage and language processing. bBot packs in some
unique features and concepts, but the architecture will be familiar to Hubot
users.</p>
<p>Please <a href="&#39;https://github.com/amazebot/bbot.chat/issues&#39;">report an issue</a> if you find any details incorrect or if we&#39;ve
missed something important.</p>
<h2>Hearing and Listening</h2><p><code>listen</code>, <code>hear</code> and <code>respond</code> methods have counterparts within bBot but they
work slightly differently and we&#39;ve attempted to find more semantic naming.</p>
<p>The most important difference is that bBot is <a href="/docs/path">built for branching</a>.
So message matching happens on the type and content of the message, just as with
Hubot, but also on the <em>scope</em>. We refer to all &quot;listeners&quot; as branches.</p>
<p>Hubot&#39;s listeners had no scope, they were all what we refer to as <em>global</em>. In
bBot, we can create global branches from the <code>global</code> attribute, or on a
specific <code>path</code> instance. The methods are the same in either case.</p>
<h3>Hear âž® Text</h3><p>In <strong>Hubot</strong> <code>hear</code> adds a text pattern listener.</p>
<p>In <strong>bBot</strong> <code>text</code> does the same, called on a path like <code>bot.global.text</code>.</p>
<p><code>hear</code> refers to the <a href="./thought">process</a> which determines if incoming messages
will be processed against branches.</p>
<h3>Respond âž® ListenDirect</h3><p>In <strong>Hubot</strong> <code>respond</code> adds a text pattern listener that will only match if
prefixed with the bot&#39;s name.</p>
<p>In <strong>bBot</strong> <code>direct</code> does the same, called on a path like <code>bot.global.direct</code>.</p>
<p><code>respond</code> is used to actually initiate the outgoing response and the
<a href="./thought">process</a> to handle it.</p>
<h3>Listen âž® ListenCustom</h3><p>In <strong>Hubot</strong> <code>listen</code> is a sort of abstract for both <code>hear</code> and <code>respond</code>.</p>
<p>In <strong>bBot</strong> <code>custom</code> can be used to create a branch with a custom matcher.</p>
<p><code>listen</code> is the <a href="./thought">process</a> which provides messages to each branch.</p>
<h4>Usage</h4><p>Hubot</p>
<pre><code class="language-js">  robot.hear(/.*/, () =&gt; console.log(&#39;I listen!&#39;))</code></pre>
<p>bBot</p>
<pre><code class="language-js">  bot.global.text(/.*/, () =&gt; console.log(&#39;I branch!&#39;))</code></pre>
<h3>Response and Context == State</h3><p>The semantics of Hubot&#39;s <code>Response</code> were sometimes misleading, as the &quot;response&quot;
did not always comprise an actual response and may never be used to make one. It
was more like a &quot;context&quot;, though there was also a <code>context</code> in use by
middleware (which response was a property of) but the full context was not
available to higher level functions, like listeners. ðŸ¤¯</p>
<p>In bBot, we&#39;ve merged <code>context</code> and <code>response</code> into an all seeing state class
called <code>B</code>. The same state flows through middleware and branches, allowing
callbacks to be informed by the full processing history.</p>
<p>A state instance, <code>b</code> takes the place of <code>res</code> as the primary argument passed to
branch callbacks and also provides methods to respond to a received message.</p>
<h4>Hubot</h4><pre><code class="language-js">robot.middleware.receive((context, next, done) =&gt; {
  console.log(&#39;Received: &#39; + context.response.message.toString())
  next()
})
robot.hear(/.*/, (response) =&gt; {
  console.log(&#39;Matched on: &#39; + JSON.stringify(response.match))
}</code></pre>
<h4>bBot</h4><pre><code class="language-js">bot.middleware.hear((b, next, done) =&gt; {
  console.log(`Received: ${b.message.toString()}`)
  next()
})
bot.global.text(/.*/, (b) =&gt; {
  console.log(`Matched on: ${JSON.stringify(b.match)}`)
}</code></pre>
<h2>Responding to Messages</h2><p>In Hubot, the <code>robot</code> and <code>response</code> both attempted to define a set of common
methods for handling outgoings, like <code>reply</code> and <code>send</code>, however the semantics
were a bit off.</p>
<p>Sometimes <code>reply</code> was used unprompted by an incoming message, so it wasn&#39;t
really replying. Sometimes <code>send</code> would be used to &quot;reply&quot;. Sometimes a platform
adapter did not support all the defined methods or needed extending with custom
methods of it&#39;s own, used inconsistently with Hubot&#39;s.</p>
<p>bBot takes a different approach, using an envelope&#39;s <code>method</code> attribute to
define how the adapter should handle it, e.g as a send (default), an emoji
reaction, a topic change, whatever. This provides message adapters more
flexibility to handle as many or few methods as needed.</p>
<p>There are only two ways to initiate outgoings:</p>
<ul>
<li><code>respond</code> is called on a state with an incoming message to respond to.</li>
<li><code>dispatch</code> can be called from the bot when there&#39;s no originating state.</li>
</ul>
<p>Message adapters only implement <code>dispatch</code> to encompass all outgoing content as
an envelope addressed back to the source or to start a new interaction.</p>
<h3>Messages and Envelopes</h3><p>bBot and Hubot have the same concept of messages and envelopes. Messages are an
incoming object from a messaging platform, parsed by the adapter. Envelopes
address outgoing content, can be unprompted or created to respond to a received
message. The message adapter parses those back into the messaging platform.</p>
<p>In Hubot, envelopes were often plain objects, but bBot adds some helpers to
set attributes. The <code>room</code> attribute of an envelope in bBot explicitly contains
<code>name</code> or <code>id</code> attributes, so adapters can perform better as they don&#39;t need
multiple lookups to determine which was given.</p>
<h3>Forming a Response</h3><p>Hubot&#39;s outgoing methods accepted arguments for composing <strong>and</strong> dispatching
the envelope, sometimes in different positions. Some methods accepted strings,
some took the whole envelope object. This often led to tricky argument slicing
and conditionals.</p>
<p>bBot arguments are strictly typed and it aims to give methods clear purpose,
consistent patterns and separation of concerns. Composing and dispatching can
be distinct actions to simplify advanced callbacks, so the <em>how</em> is not confused
with the <em>what</em>.</p>
<p>Envelope helpers are as follows (and can be chained together):</p>
<ul>
<li><code>toRoomId</code> sets the room ID</li>
<li><code>toRoomName</code> sets the room name</li>
<li><code>write</code> adds string content</li>
<li><code>attach</code> adds payload content</li>
<li><code>compose</code> add strings and/or payloads</li>
<li><code>via</code> sets the method for the adapter to implement</li>
</ul>
<p>States can create and dispatch an envelope responding to an incoming message,
inheriting the properties to address it back to the source. Using:</p>
<ul>
<li><code>respond</code> to compose and dispatch in one</li>
<li><code>reply</code> to compose and dispatch in one, with the username prefixed</li>
<li><code>respondVia</code> to override the default dispatch method, compose and dispatch</li>
<li><code>envelope</code> to get the envelope first, if it needs to be re-addressed to 
a different room or user</li>
</ul>
<h3>Unprompted Outgoing</h3><h4>Hubot</h4><pre><code class="language-js">const room = { name: &#39;general&#39; }
const user = { name: &#39;bilbo&#39; }
robot.messageRoom(room.name, &#39;hello #&#39; + room.name)</code></pre>
<h4>bBot</h4><pre><code class="language-js">const room = { name: &#39;general&#39; }
const user = { name: &#39;bilbo&#39; }
bot.dispatch(new bot.Envelope({ room }).compose(&#39;hello #&#39; + room.name))</code></pre>
<h3>Responding to Incoming</h3><h4>Hubot</h4><pre><code class="language-js">robot.hear(/say hello to (.*)/i, (res) =&gt; {
  res.send(&#39;Hello &#39; + res.match[1])
})
robot.hear(/can anyone hear me/i, (res) =&gt; {
robot.adapter.react(res.envelope, &#39;:raising-hand:&#39;)
})</code></pre>
<h4>bBot</h4><pre><code class="language-js">bot.global.text(/say hello to (.*)/i, (b) =&gt; {
  b.respond(&#39;Hello &#39; + b.match[1]
})
bot.global.text(/can anyone hear me/i, (b) =&gt; {
  b.respondVia(&#39;react&#39;, &#39;:raising-hand:&#39;)
})</code></pre>
<h3>Adapter Class</h3><h4>Hubot</h4><pre><code class="language-js">const { Adapter } = require(&#39;hubot&#39;)
class Campfire extends Adapter {
  send (envelope/* , ...strings */) {
    const strings = [].slice.call(arguments, 1)
    const string = strings.shift()
    // &#39;speak&#39; is a Campfire method, recursive callback sends multiple strings
    this.platform.room(envelope.room).speak(string, (error, data) =&gt; {
      this.send.apply(this, [envelope].concat(strings))
    })
  }
  topic (envelope, topic) {
    // &lt; handle custom outgoing method &gt;
  }
}
exports.use = robot =&gt; new Campfire(robot)</code></pre>
<h4>bBot</h4><pre><code class="language-js">const { MessageAdapter } = require(&#39;bBot&#39;)
class Campfire extends MessageAdapter {
  async dispatch (envelope) {
    switch (envelope.method) {
      case &#39;topic&#39;: 
        // &lt; handle custom outgoing method &gt;
        break;
      default: // `speak` or `send` would be handled as default method
        for (let string of b.envelope.strings) {
          await this.platform.room(b.envelope.room).speak(string)
        }
        break;
    }
  }
}
exports.use = bot =&gt; new Campfire(bot)</code></pre>
<p>Alternatively, adapters could define platform methods, to relay from dispatch:</p>
<pre><code class="language-js">const { MessageAdapter } = require(&#39;bBot&#39;)
class Campfire extends MessageAdapter {
  dispatch (envelope) {
    return this[envelope.method](envelope)
  }
  send (envelope) {
    return this.speak(envelope) // proxy to re-direct default method
  }
  async speak (envelope) {
    for (let string of b.envelope.strings) {
      await this.platform.room(b.envelope.room).speak(string)
    }
  }
  async topic (envelope) {
    // &lt; handle custom outgoing method &gt;
  }
}</code></pre></div></div></div></article></main><footer role="aside"><footer class="text-light"><div class="p-5 mx-auto"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 25">
    <path d="M20 4.9C20 2.2 17.3 0 14 0H2C.9 0 0 .9 0 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V9.6c2.9-.4 5-2.3 5-4.7zM9.2 2C8.4 2.8 8 3.8 8 4.9c0 .9.3 1.9 1 2.7v3.8l4-1.2V14H2V2h7.2zM2 18v-2h11v2H2zM14.2 7.7l-3.2.9V6.7l-.3-.3c-.5-.5-.7-1-.7-1.6C10 3.3 11.8 2 14 2s4 1.3 4 2.9c0 1.4-1.7 2.7-3.8 2.8z"/>
</svg>
<a href="https://twitter.com/amazebot_chat">@amazebot_chat</a><br/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 25">
    <path d="M0 3v14h20V3H0zm10 7.2L3.8 5h12.5L10 10.2zM6.6 10L2 13.9V6.1L6.6 10zm1.6 1.3l1.8 1.5 1.8-1.5 4.4 3.7H3.8l4.4-3.7zm5.2-1.3L18 6.1v7.7L13.4 10z"/>
</svg>
<a href="mailto:hello@amazebot.chat">hello@amazebot.chat</a><br/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 25">
    <path d="M19 10.2V2c0-1.1-.9-2-2-2H2C.9 0 0 .9 0 2v14c0 1.1.9 2 2 2h9.1c1.1 1 2.1 1.7 2.4 1.8.2.1.4.2.5.2.2 0 .4-.1.5-.2.6-.4 5.5-3.7 5.5-7 0-1-.4-1.9-1-2.6zM17 4h-7V2h7v2zM6 4V2h2v2H6zM4 2v2H2V2h2zM2 6h15v3.1c-.2-.1-.4-.1-.6-.1-.9 0-1.7.3-2.4.9-.7-.6-1.5-.9-2.4-.9-2 0-3.6 1.7-3.6 3.8 0 1.1.5 2.2 1.3 3.2H2V6zm12 11.8c-1.4-1-4-3.3-4-5 0-1 .7-1.8 1.6-1.8.6 0 1.2.4 1.5 1 .2.3.5.6.9.6s.7-.2.9-.6c.3-.6.8-1 1.5-1 .9 0 1.6.8 1.6 1.8 0 1.6-2.3 3.7-4 5z"/>
</svg>
<a href="//amazebot.chat">amazebot.chat</a></div></footer></footer><script src="//code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script><script src="/main.js"></script><script src="//stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script></body></html>